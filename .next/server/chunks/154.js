exports.id=154,exports.ids=[154],exports.modules={5181:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},29938:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,61476,23)),Promise.resolve().then(s.bind(s,85225))},13072:(e,t,s)=>{Promise.resolve().then(s.bind(s,11858))},11858:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AuthProvider:()=>l});var a=s(95344),r=s(47674);function l({children:e}){return a.jsx(r.SessionProvider,{children:e})}},59210:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(95344),r=s(3729),l=s(38064),i=s(8428),n=s(33759),o=s(48962),d=s(10342),c=s(97602),m=s(24704),u=s.n(m),x=s(15757);function h({isOpen:e,onClose:t,onCapture:s}){let i=(0,r.useRef)(null),[n,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(null),[h,g]=(0,r.useState)({name:"",email:"",phone:"",rawText:""}),f=(0,r.useCallback)(async()=>{let e=i.current?.getScreenshot();if(!e){m("Failed to capture image. Please try again.");return}await b(e)},[i]),b=async e=>{try{o(!0);let a=(0,x.createScheduler)(),r=await (0,x.createWorker)();await r.loadLanguage("eng"),await r.initialize("eng"),a.addWorker(r);let{data:{text:l}}=await a.addJob("recognize",e);await a.terminate();let i=l.split("\n").filter(e=>e.trim()),n=i[0]?.trim(),d=i.find(e=>e.includes("@"))?.trim(),c=i.find(e=>e.match(/[\d-+()]{10,}/))?.trim(),m={name:n||"",email:d||"",phone:c||"",rawText:l};g(m),s(e,m),t()}catch(e){console.error("Error processing image:",e),m("Failed to process image. Please try again.")}finally{o(!1)}};return(0,a.jsxs)(l.Vq,{open:e,onClose:t,className:"relative z-50",children:[a.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(l.Vq.Panel,{className:"mx-auto max-w-sm rounded-lg bg-white",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("button",{onClick:t,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-500",children:a.jsx(c.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"p-6",children:[a.jsx(l.Vq.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:"Capture Business Card"}),(0,a.jsxs)("div",{className:"relative aspect-[1.75] bg-gray-100 rounded-lg overflow-hidden mb-4",children:[a.jsx(u(),{ref:i,screenshotFormat:"image/jpeg",className:"absolute inset-0 w-full h-full object-cover",videoConstraints:{width:1280,height:720,facingMode:"environment"}}),a.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-gray-400 rounded-lg"})]}),d&&a.jsx("p",{className:"text-sm text-red-600 mb-4",children:d}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:f,disabled:n,children:n?"Processing...":"Capture"})})]})]})})})]})}function g({onCardAdded:e}){let t=(0,i.useRouter)(),[s,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[p,j]=(0,r.useState)(!1),[v,y]=(0,r.useState)({name:"",title:"",company:"",email:"",phone:"",website:"",notes:""}),w=async s=>{s.preventDefault(),j(!0),b(null);try{let s=new FormData;if(Object.entries(v).forEach(([e,t])=>{t&&s.append(e,t)}),x){let e=await fetch(x),t=await e.blob();s.append("image",t,"card.jpg")}if(!(await fetch("/api/cards",{method:"POST",body:s})).ok)throw Error("Failed to create card");t.refresh(),c(!1),N(),e?.()}catch(e){console.error("Error creating card:",e),b("Failed to create card. Please try again.")}finally{j(!1)}},N=()=>{y({name:"",title:"",company:"",email:"",phone:"",website:"",notes:""}),g(null),b(null)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>c(!0),className:"inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:[a.jsx(n.Z,{className:"h-5 w-5 mr-1"}),"Add Card"]}),(0,a.jsxs)(l.Vq,{open:s,onClose:()=>c(!1),className:"relative z-50",children:[a.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(l.Vq.Panel,{className:"mx-auto max-w-lg w-full bg-white rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx(l.Vq.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Business Card"}),a.jsx("form",{onSubmit:w,children:(0,a.jsxs)("div",{className:"space-y-4",children:[x?(0,a.jsxs)("div",{className:"relative w-full aspect-[1.75] mb-4",children:[a.jsx("img",{src:x,alt:"Business card preview",className:"w-full h-full object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>u(!0),className:"absolute bottom-2 right-2 bg-white/80 p-2 rounded-full hover:bg-white",children:a.jsx(o.Z,{className:"h-5 w-5 text-gray-600"})})]}):a.jsx("button",{type:"button",onClick:()=>u(!0),className:"w-full aspect-[1.75] flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(o.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-600",children:"Capture Business Card"})]})}),a.jsx(d.Z,{label:"Name",value:v.name,onChange:e=>y({...v,name:e.target.value}),required:!0}),a.jsx(d.Z,{label:"Title",value:v.title,onChange:e=>y({...v,title:e.target.value})}),a.jsx(d.Z,{label:"Company",value:v.company,onChange:e=>y({...v,company:e.target.value})}),a.jsx(d.Z,{label:"Email",type:"email",value:v.email,onChange:e=>y({...v,email:e.target.value})}),a.jsx(d.Z,{label:"Phone",type:"tel",value:v.phone,onChange:e=>y({...v,phone:e.target.value})}),a.jsx(d.Z,{label:"Website",type:"url",value:v.website,onChange:e=>y({...v,website:e.target.value})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),a.jsx("textarea",{value:v.notes,onChange:e=>y({...v,notes:e.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),f&&a.jsx("p",{className:"text-sm text-red-600",children:f}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),N()},className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:p,className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:p?"Saving...":"Save"})]})]})})]})})})]}),m&&a.jsx(h,{isOpen:m,onCapture:(e,t)=>{g(e),y(e=>({...e,name:t.name||e.name,email:t.email||e.email,phone:t.phone||e.phone,notes:t.rawText||e.notes})),u(!1),c(!0)},onClose:()=>u(!1)})]})}},40441:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95344),r=s(3729),l=s(8428),i=s(10342),n=s(38064),o=s(97602),d=s(97579),c=s(78360),m=s(72416),u=s(29936),x=s(29709);function h({card:e,onClose:t}){let s=(0,l.useRouter)(),[h,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)(""),[v,y]=(0,r.useState)(null),w=(0,r.useRef)(null);async function N(t){t.preventDefault(),y(null);try{if(!(await fetch(`/api/cards/${e.id}/share`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p})})).ok)throw Error("Failed to share card");b(!1),j("")}catch(e){e instanceof Error&&y(e.message)}}async function C(){try{if(!(await fetch(`/api/cards/${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete card");t(),s.refresh()}catch(e){e instanceof Error&&y(e.message)}}return(0,r.useEffect)(()=>{function e(e){w.current&&!w.current.contains(e.target)&&t()}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t]),x.z.object({name:x.z.string().min(1,"Name is required"),title:x.z.string().optional(),company:x.z.string().optional(),email:x.z.string().email("Invalid email format").optional().or(x.z.literal("")),phone:x.z.string().optional(),website:x.z.string().optional(),notes:x.z.string().optional(),category:x.z.string().optional()}),(0,a.jsxs)(n.Vq,{open:!0,onClose:t,className:"relative z-50",children:[a.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(n.Vq.Panel,{ref:w,className:"mx-auto max-w-lg w-full bg-white rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx(n.Vq.Title,{className:"text-lg font-medium text-gray-900",children:"View Business Card"}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:a.jsx(o.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[v&&a.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-md text-sm",children:v}),f?(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[a.jsx(i.Z,{type:"email",label:"Email address",value:p,onChange:e=>j(e.target.value),required:!0}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Share"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),e.title&&a.jsx("p",{className:"text-gray-600",children:e.title})]}),e.company&&(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[a.jsx(d.Z,{className:"h-5 w-5 mr-2"}),e.company]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[a.jsx(c.Z,{className:"h-5 w-5 mr-2"}),a.jsx("a",{href:`tel:${e.phone}`,className:"hover:text-blue-600",children:e.phone})]}),e.email&&(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[a.jsx(m.Z,{className:"h-5 w-5 mr-2"}),a.jsx("a",{href:`mailto:${e.email}`,className:"hover:text-blue-600",children:e.email})]}),e.website&&(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[a.jsx(u.Z,{className:"h-5 w-5 mr-2"}),a.jsx("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600",children:e.website})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Notes"}),a.jsx("p",{className:"text-gray-500 text-sm whitespace-pre-wrap",children:e.notes})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Share"}),a.jsx("button",{onClick:C,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})]})]})})})]})}var g=s(46682),f=s(89410);function b({cards:e}){let[t,s]=(0,r.useState)(null);return(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4",children:[e.map(e=>(0,a.jsxs)("div",{onClick:()=>s(e),className:"relative group bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200",children:[a.jsx("div",{className:"relative w-full aspect-[1.75] mb-3",children:e.imageUrl?a.jsx(f.default,{src:e.imageUrl,alt:`${e.name}'s business card`,width:350,height:200,className:"object-cover rounded-md w-full h-full",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw",priority:!0,onError:t=>{let s=t.target;s.src=e.imageUrl||"",s.onerror=null}}):a.jsx("div",{className:"absolute inset-0 bg-gray-100 rounded-md flex items-center justify-center",children:a.jsx(g.Z,{className:"w-12 h-12 text-gray-400"})})}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),e.title&&a.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.title}),e.company&&a.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.company})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-400 truncate",children:["Added by ",e.owner.name||e.owner.email]})]},e.id)),t&&a.jsx(h,{card:t,onClose:()=>s(null)})]})}},85225:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(95344),r=s(56506),l=s(8428);function i(){let e="/"===(0,l.usePathname)();return(0,a.jsxs)(r.default,{href:"/",className:`flex items-center space-x-2 text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:[(0,a.jsxs)("svg",{className:`h-8 w-8 ${e?"text-white":"text-blue-600"}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M3 9C3 7.89543 3.89543 7 5 7H19C20.1046 7 21 7.89543 21 9V18C21 19.1046 20.1046 20 19 20H5C3.89543 20 3 19.1046 3 18V9Z",className:e?"fill-white":"fill-blue-600",fillOpacity:"0.2"}),a.jsx("path",{d:"M3 6C3 4.89543 3.89543 4 5 4H19C20.1046 4 21 4.89543 21 6V15C21 16.1046 20.1046 17 19 17H5C3.89543 17 3 16.1046 3 15V6Z",className:e?"fill-white":"fill-blue-600",fillOpacity:"0.4"}),a.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H19C20.1046 1 21 1.89543 21 3V12C21 13.1046 20.1046 14 19 14H5C3.89543 14 3 13.1046 3 12V3Z",className:e?"fill-white":"fill-blue-600",fillOpacity:"0.8"})]}),a.jsx("span",{children:"CardStack"})]})}},10342:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(95344),r=s(3729),l=s(79377);let i=(0,r.forwardRef)(({className:e,label:t,error:s,icon:r,type:i="text",variant:n="light",...o},d)=>(0,a.jsxs)("div",{className:"w-full",children:[t&&a.jsx("label",{className:(0,l.m6)("block text-sm font-medium leading-6 mb-2","dark"===n?"text-gray-100":"text-gray-900"),children:t}),(0,a.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[r&&a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx("div",{className:"dark"===n?"text-gray-400":"text-gray-500",children:r})}),a.jsx("input",{type:i,className:(0,l.m6)(`block w-full rounded-md border-0 py-2.5 px-3 ring-1 ring-inset 
              focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6
              disabled:cursor-not-allowed disabled:opacity-50`,"dark"===n?"bg-gray-800 text-white ring-gray-700 placeholder:text-gray-500 focus:ring-blue-500":"bg-white text-gray-900 ring-gray-300 placeholder:text-gray-400 focus:ring-blue-600",r&&"pl-10",s&&"ring-red-300 focus:ring-red-500",e),ref:d,...o}),s&&a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:a.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]}),s&&a.jsx("p",{className:(0,l.m6)("mt-2 text-sm","dark"===n?"text-red-400":"text-red-600"),children:s})]}));i.displayName="Input";let n=i},43625:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,metadata:()=>u,viewport:()=>m});var a=s(25036),r=s(42195),l=s.n(r);s(5023);var i=s(86843);let n=(0,i.createProxy)(String.raw`/Users/noman/Desktop/winsurf-playground/cards/src/app/providers.tsx`),{__esModule:o,$$typeof:d}=n;n.default;let c=(0,i.createProxy)(String.raw`/Users/noman/Desktop/winsurf-playground/cards/src/app/providers.tsx#AuthProvider`),m={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#4f46e5"},u={title:"CardStack - Business Card Manager",description:"Manage your business cards digitally",manifest:"/manifest.json"};function x({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"manifest",href:"/manifest.json"}),a.jsx("link",{rel:"apple-touch-icon",href:"/icons/icon-192x192.png"})]}),a.jsx("body",{className:l().className,children:a.jsx(c,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:e})})})]})}},48206:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(25036),r=s(16274),l=s(63824);function i(){return a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(l.ZP,{})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"404"}),a.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Page not found"}),a.jsx("p",{className:"mt-1 text-gray-500",children:"The page you're looking for doesn't exist or has been moved."})]}),a.jsx("div",{className:"mt-8",children:a.jsx(r.default,{href:"/",className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:"Go back home"})})]})})}},63824:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>i});let a=(0,s(86843).createProxy)(String.raw`/Users/noman/Desktop/winsurf-playground/cards/src/components/Logo.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},5023:()=>{}};